<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>EEG BCI Page-Turner – Local UI</title>
    <link rel="stylesheet" href="Stim.css" />
  </head>
  <body>
    <div class="app-shell">
      <!-- Left: status + config -->
      <aside class="sidebar">
        <header class="app-header">
          <h1>EEG BCI Page-Turner</h1>
          <p class="subtitle">Local Stimulus & State Monitor</p>
        </header>

        <section class="status-card">
          <div id="connection-status" class="status-pill">
            <span class="dot"></span>
            <span id="connection-label">Disconnected</span>
          </div>
          <div class="status-row">
            <span class="label">Monitor refresh</span>
            <span id="refresh-label" class="value">Measuring…</span>
          </div>
        </section>

        <section class="state-card">
          <h2>Controller State Store</h2>
          <div class="state-row">
            <span class="label">Sequence</span>
            <span id="seq-value" class="value">—</span>
          </div>
          <div class="state-row">
            <span class="label">Stimulus Window</span>
            <span id="stim-window-value" class="value">—</span>
          </div>
          <div class="state-row">
            <span class="label">Block Id</span>
            <span id="block-value" class="value">0</span>
          </div>
          <div class="state-row">
            <span class="label">Frequency</span>
            <span id="freq-hz-value" class="value">—</span>
          </div>
          <div class="state-row">
            <span class="label">Frequency Enum Value</span>
            <span id="freq-code-pill" class="pill pill-soft">—</span>
          </div>
        </section>

        <section class="controls-card">
          <h2>Session Controls</h2>
          <div class="button-row">
            <button id="btn-start-calib" class="btn ghost">
              Start Calibration
            </button>
            <button id="btn-start-run" class="btn primary">
              Start Run Mode
            </button>
          </div>
        </section>
      </aside>

      <!-- Right: main view area -->
      <main class="main-panel">
        <!-- HOME VIEW -->
        <section id="view-home" class="view">
          <h2>Home</h2>
          <p class="view-lead">
            Connect the C++ backend and choose a session type to begin.
          </p>
          <ul class="bullets">
            <li>
              Calibration: single-frequency blocks to train the SSVEP
              classifier.
            </li>
            <li>Run Mode: dual-frequency arrows for page turning.</li>
          </ul>
        </section>

        <!-- INSTRUCTIONS VIEW -->
        <section id="view-instructions" class="view hidden">
          <h2>Instructions</h2>
          <p id="instructions-text" class="view-lead">
            Rest for a few seconds, then focus on the indicated flicker block.
          </p>
          <div class="inline-stats">
            <div>
              <span class="label">Block</span>
              <span id="instr-block-id" class="value">—</span>
            </div>
            <div>
              <span class="label">Upcoming frequency</span>
              <span id="instr-freq-hz" class="value">— Hz</span>
            </div>
          </div>
        </section>

        <!-- ACTIVE CALIBRATION VIEW -->
        <section id="view-active-calib" class="view hidden">
          <h2>Calibration Block</h2>
          <p class="view-lead">
            Focus your gaze on the flickering square to record your SSVEP
            responses.
          </p>
          <div class="flicker-stage">
            <div id="calib-block" class="flicker-block"></div>
          </div>
        </section>

        <!-- ACTIVE RUN VIEW -->
        <section id="view-active-run" class="view hidden">
          <h2>Page Turning</h2>
          <p class="view-lead">
            Look at the left or right arrow to turn pages backward or forward.
          </p>
          <div class="flicker-stage dual">
            <div id="left-arrow" class="flicker-block arrow-left">←</div>
            <div id="right-arrow" class="flicker-block arrow-right">→</div>
          </div>
        </section>

        <!-- LOG PANEL -->
        <section class="log-panel">
          <h3>Event Log</h3>
          <div id="log" class="log-body"></div>
        </section>
      </main>
    </div>

    <script src="Stim.js?v=20251119-1"></script>
  </body>
</html>
